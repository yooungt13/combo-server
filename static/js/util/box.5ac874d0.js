var $$=function(t){return document.getElementById(t)},addEvent=function(t,i,e){t.addEventListener?t.addEventListener(i,e,!1):t.attachEvent("on"+i,function(){e.call(t)})},Box=function(){};Box.prototype={box:null,mask:null,BoxWidth:300,BoxHeight:200,Title:"Title",Content:"Content here",IsBar:1,IsShut:1,init:function(t){t&&(this.BoxWidth=t.width||this.BoxWidth,this.BoxHeight=t.height||this.BoxHeight,this.Title=t.title||this.Title,this.Content=t.content||this.Content,this.IsBar=void 0!==t.isBar?t.isBar:this.IsBar,this.IsShut=void 0!==t.isShut?t.isShut:this.IsShut)},open:function(t){this.init(t),this.createBox(),this.createMask()},close:function(){this.removeBox(),this.removeMask()},createBox:function(){if(this.box=this.box||document.createElement("div"),this.setBoxStyle(),document.body.appendChild(this.box),this.zoomIn(),this.IsBar){if(this.setDragListener(),this.IsShut){var t=$$("box_shut"),i=this;addEvent(t,"click",function(t){i.fillTitle(""),i.zoomOut()})}}else{var i=this;addEvent(this.box,"click",function(t){i.zoomOut()})}},setBoxStyle:function(){this.box.id="box",this.box.style.background="#222",this.box.style.position="absolute",this.box.style.border="4px solid #000",this.box.style.width=this.BoxWidth+"px",this.box.style.height=this.BoxHeight+"px",this.box.style.left=this.getLeft(this.BoxWidth)+"px",this.box.style.top=this.getTop(this.BoxHeight)+"px",this.box.style.display="none",this.box.style.textAlign="left",this.box.style.boxShadow="#000 3px 3px 4px",this.box.style.zIndex=1001;var t="";this.IsBar&&(t+='<div id="bar" style="line-height: 28px;padding-left:1em;background:#000;cursor:move;">'+this.Title,this.IsShut&&(t+='<a id="box_shut" style="color:#fff;position:absolute;cursor:pointer;font-weight:bold;top:0px;right:10px;text-decoration: none;">Ã—</a>'),t+="</div>"),t+='<div id="content" style="padding: 1em 1em;"></div>',this.box.innerHTML=t},createMask:function(){this.mask=this.mask||document.createElement("div"),this.setMaskStyle(),document.body.appendChild(this.mask)},setMaskStyle:function(){this.mask.id="mask",this.mask.style.background="#000",this.mask.style.position="fixed",this.mask.style.width="100%",this.mask.style.height="100%",this.mask.style.left="0",this.mask.style.top="0",this.mask.style.display="block",this.mask.style.opacity="0.5",this.mask.style.zIndex=1e3},removeBox:function(){document.body.removeChild(this.box)},removeMask:function(){document.body.removeChild(this.mask)},normalIn:function(){this.box.style.display="block",this.fillContent(this.Content)},zoomIn:function(){var t,i,e=1,s=setInterval(function(){return t=this.BoxWidth*e/10,i=this.BoxHeight*e/10,10===e?(clearInterval(s),void this.fillContent(this.Content)):(this.box.style.display="block",this.box.style.width=t+"px",this.box.style.height=i+"px",this.box.style.left=this.getLeft(t)+"px",this.box.style.top=this.getTop(i)+"px",e++,void 0)}.bind(this),10)},zoomOut:function(){var t,i,e=10;this.fillContent(""),this.removeMask();var s=this.getLeft(this.BoxWidth)-parseInt(this.box.style.left),o=this.getTop(this.BoxHeight)-parseInt(this.box.style.top),n=setInterval(function(){return t=this.BoxWidth*e/10,i=this.BoxHeight*e/10,1===e?(clearInterval(n),void this.removeBox()):(this.box.style.width=t+"px",this.box.style.height=i+"px",this.box.style.left=this.getLeft(t)-s+"px",this.box.style.top=this.getTop(i)-o+"px",e--,void 0)}.bind(this),10)},setDragListener:function(){var t=$$("bar"),i=this,e={startX:0,startY:0,_X:0,_Y:0,isDrag:!1};addEvent(t,"mousedown",function(t){var t=t||window.event;e.isDrag=!0,e._X=t.clientX,e._Y=t.clientY,e.startX=i.box.style.left,e.startY=i.box.style.top}),addEvent(document,"mouseup",function(t){e.isDrag=!1}),addEvent(document,"mousemove",function(t){var t=t||window.event;if(e.isDrag){var s=t.clientX,o=t.clientY,n=s-e._X+parseInt(e.startX),h=o-e._Y+parseInt(e.startY);i.box.style.left=n+"px",i.box.style.top=h+"px"}})},fillContent:function(t){$$("content").innerHTML=t},fillTitle:function(t){$$("bar").innerHTML=t},getLeft:function(t){return(document.body.offsetWidth-t)/2},getTop:function(t){return(document.body.offsetHeight-t)/2+document.body.scrollTop}};